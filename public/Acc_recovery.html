<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Recovery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="Acc_recovery.css">
    <link rel="icon" href="image/adashino.jpg">
    <script src="https://kit.fontawesome.com/004f38ffae.js" crossorigin="anonymous"></script>
</head>
<body>
     
    

    <div class="misc">
      <div class="socials">
        <i class="fa-brands fa-square-facebook" id="facebooklink"></i>
        <i class="fa-brands fa-tiktok" id="tiktoklink"></i>
        <i class="fa-brands fa-instagram" id="iglink"></i>
      </div>

      <div class="aboutpage">
        <i class="fa-solid fa-circle-exclamation" id="openbtn"></i>
      </div>
    </div>
        <form style="max-width: 350px;margin:auto;" id="recoveryform">
            <h1 class="h3 mb-3 font-weight-normal">Account Recovery</h1>
            <p1 class="mb-3 font-weight-normal "> Password recovery will be sent to your email</p1>

            <label class="visually-hidden" for="userEmail">Email Address</label>
            <input type="email" name="emailinput" id="userEmail" placeholder="Email Address" class="form-control mb-2" autofocus required>
            <a href="login.html">Existing user? Sign in here</a>
            

            <div class="mt-3">
                <button class="btn btn-lg w-100 btn-primary">Reset Password</button>
            </div>

            <p id="statusmsg"></p>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

    <script type="module" defer>

        import { auth } from "./connection.js";
        import { sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-auth.js";


        console.log("input data");
        const recover_form = document.getElementById("recoveryform");
        const statusMsg = document.getElementById("statusmsg");

        recover_form.addEventListener("submit" , (e) => {
            e.preventDefault();
            
            const email = document.getElementById("userEmail").value;

            sendPasswordResetEmail(auth, email).then(() => {
                statusMsg.textContent = `Recovery instructions has been sent to ${email}`;
                console.log("Sent to email");

            }) .catch((error) => {
                statusMsg.textContent = `Failed to send: ${error.message}`;
            });

            console.log("code finished running");

        })

        const facebook = document.getElementById("facebooklink")
        facebook.addEventListener("click", () => {window.location.href = "https://www.facebook.com/ronnell.secretodayson"})
        const tiktok = document.getElementById("tiktoklink");
        tiktok.addEventListener("click", () => {window.location.href = "https://www.tiktok.com/@adashinobeniosart"});
        const instagram = document.getElementById("iglink")
        instagram.addEventListener("click", () => {window.location.href = "https://www.instagram.com/pres_1025/"})

        window.addEventListener("pageshow", function (event) {
    
        if (event.persisted) {
        window.location.reload(); 
            }
        });


    </script>
</body>
</html>